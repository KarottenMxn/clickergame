<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Karotten clicker</title>
    <link rel="stylesheet" href="style.css">
    
</head>
<body>
        <audio id="clickSound">
          <source src="carrotClick.mp3">
        </audio>

        
        <div style="float:left; margin:10px; width: 500px; height: 1000px;">
          <div id="counter">Karotten: 0</div>
          <div id="cps">cps: 0</div>

          <div id="carrotClickAmount" class="carrotClickAmount"></div>
          <div class="carrotCase" id="case">
            <img src="karotte.png" onclick="carrotClick()" draggable="false" class="clickerCarrot" id="clicker">
          </div>
        </div>
        <div style="float:right; margin:10px" class="upgradeList">
          <div class="upgrade" onclick="buyField()">
            <h2 class="upgradeName">Feld</h2>
            <h2 id="fieldNumber" class="upgradeNumber">Owned: 0</h2>
          </div>
          <div class="upgrade" onclick="buyCarrotFabric()">
            <h2 class="upgradeName">Karotten Fabrik</h2>
            <h2 id="carrotFabricNumber" class="upgradeNumber">Owned: 0</h2>
          </div>
        </div>
        <button onclick="reset()">Reset</button>

        
        <script>
          var gesamtKarotten = 0;
          
          
          var clickAmount = 1;
          
          
          var click = 0;
          
          var carrotFabricNumber = 0;
          var carrotFabricAmount = 5;
          
          var fieldNumber = 0; 
          var fieldAmount = 1;
                    
          
          var savedCarrotsStr = localStorage.getItem("saveCarrots");
          var savedCarrots = Number(savedCarrotsStr)
          var savedFabricNumberStr = localStorage.getItem("saveFabricNumber");
          var savedFabricNumber = Number(savedFabricNumberStr)
          var savedFieldNumberStr = localStorage.getItem("saveFieldNumber");
          var savedFieldNumber = Number(savedFieldNumberStr)

          gesamtKarotten = savedCarrots;
          carrotFabricNumber = savedFabricNumber;
          fieldNumber = savedFieldNumber;
          


          setInterval(function(){ 
            gesamtKarotten = gesamtKarotten + (carrotFabricNumber * carrotFabricAmount) + (fieldNumber * fieldAmount);
            save()
          }, 1000); 
          
          setInterval(function(){
            document.getElementById("counter").innerHTML = "Karotten: " + gesamtKarotten;
            document.getElementById("cps").innerHTML = (carrotFabricNumber * carrotFabricAmount) + (fieldNumber * fieldAmount);
            document.getElementById("carrotFabricNumber").innerHTML = "Owned: " + carrotFabricNumber
            document.getElementById("fieldNumber").innerHTML = "Owned: " + fieldNumber;
            
          }, 50 );
           

            function carrotClick() {
              gesamtKarotten++;
              playSound(document.getElementById("clickSound"));
              
              
            }
            function playSound(sound) {
              sound.play();
            }
            function buyField() {
              if (gesamtKarotten > 24) {
                gesamtKarotten = gesamtKarotten - 25;
                fieldNumber++;
                

              }
            }
            function buyCarrotFabric() {
              if (gesamtKarotten > 49) {
                gesamtKarotten = gesamtKarotten - 50;
                carrotFabricNumber++;
              }
            }
            
            document.getElementById("clicker").addEventListener("click", clickPos, false)
            function clickPos(e) {
              cursorX = e.pageX;
              cursorY = e.pageY;
              console.log(cursorX + "  " + cursorY)
              var container = document.getElementById("case")
              var newElm = document.createElement('p');
              newElm.style = "left:" + cursorX + "px; top:" + cursorY + "px"
              newElm.innerText = "+" + clickAmount;
              container.appendChild(newElm);

              setTimeout(function(){ 
                newElm.remove();
              }, 2000);
              }

              function save() {
                localStorage.setItem("saveCarrots", gesamtKarotten);
                localStorage.setItem("saveFabricNumber", carrotFabricNumber);
                localStorage.setItem("saveFieldNumber", fieldNumber);


              }
              function reset() {
                standart()
                save()
              }
              function standart() {
                gesamtKarotten = 0;
                carrotFabricNumber = 0;
                carrotFabricAmount = 5;
                fieldNumber = 0;
                fieldAmount = 1;
              }


        </script>
</body>
</html>